name: Compress Mods

on:
  push:
    branches:
      - main

jobs:
  compress:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Install zip
      run: sudo apt-get install zip

    - name: Install unrar and p7zip
      run: sudo apt-get install unrar p7zip-full

    - name: Compress mods into zip
      run: zip -r mods.zip mods

    - name: Compress mods into rar
      run: rar a mods.rar mods

    - name: Compress mods into 7z
      run: 7z a mods.7z mods

    - name: Upload artifacts
      uses: actions/upload-artifact@v3
      with:
        name: mods-archives
        path: |
          mods.zip
          mods.rar
          mods.7z
